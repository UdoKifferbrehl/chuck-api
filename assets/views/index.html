{% extends "base.html" %}

{% block head %}
    <title>Chuck Norris Jokes Api</title>
    <meta content="Chucknorris.io is a free JSON API for hand curated Chuck Norris jokes."name="description">
    <link rel="canonical" href="/" />
{% endblock %}

{% block content %}
    <section>
        <p><b><a href="https://api.chucknorris.io">chucknorris.io</a></b> is a free JSON API for hand curated Chuck Norris facts. If you think there is a fact missing drop us a line at <a href="mailto:admin@chucknorrisio">admin@chucknorris.io</a></p>
        <p>Chuck Norris facts are satirical factoids about martial artist and actor Chuck Norris that have become an Internet phenomenon and as a result have become widespread in popular culture. The 'facts' are normally absurd hyperbolic claims about Norris' toughness, attitude, virility, sophistication, and masculinity.</p>
        <p>Chuck Norris facts have spread around the world, leading not only to translated versions, but also spawning localized versions mentioning country-specific advertisements and other Internet phenomena. Allusions are also sometimes made to his use of roundhouse kicks to perform seemingly any task, his large amount of body hair with specific regard to his beard, and his role in the action television series Walker, Texas Ranger.</p>
    </section>
    <section>
        <h3>Usage</h3>
        <p>Retrieve a random chuck joke in JSON format.</p>
        <code class="request get"><a title="Retrieve a random chuck norris joke in JSON format." href="/jokes/random">https://api.chucknorris.io/jokes/random</a></code>
        <p>Example response:</p>
        <code class="response">
            {<br>
                "icon_url" : "<span id="response_icon_url">{{ example_response_icon_url }}</span>",<br>
                "id" : "<span id="response_id">{{ example_response_id }}</span>",<br>
                "value" : "<a href="{{ example_response_url }}" id="response_text">{{ example_response_text }}</a>"<br>
            }
        </code>
        <a href="#!" id="get_random_joke" onclick="getJoke()">Get me a new one ...</a> <small>(press "r" to refresh)</small>
    </section>
    
    <script>
    document.onkeydown = function(e) {
        switch (e.keyCode) {
            case 82:
                // Enter
                getJoke();
                break;
        }
    };

    function getJoke() {
        var req = new XMLHttpRequest();
        
        req.onreadystatechange = function() {
            if (4 == req.readyState && 200 == req.status) {
                var reponse = JSON.parse(req.responseText);
                
                document.getElementById('response_icon_url').innerHTML = reponse.icon_url;
                document.getElementById('response_text').innerHTML     = reponse.value;
                document.getElementById('response_text').href          = '/jokes/' + reponse.id;
                document.getElementById('response_id').innerHTML       = reponse.id;
             }
        }
        
        req.open('GET', '/jokes/', true);
        req.send();
    }
    </script>
{% endblock %}
